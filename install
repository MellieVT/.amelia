# Install Homebrew
[ $(command -v brew) == "" ] && ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Install zsh from Homebrew if it hasn't been already (macOS one is OLD)
[ ! -e /usr/local/bin/zsh ] && brew install zsh zsh-completions

# Install oh-my-zsh
[ ! -e ~/.oh-my-zsh ] && git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh

# Tap Homebrew Cask
brew tap caskroom/cask

# Install Atom
brew cask install atom

# Install IINA
brew cask install iina

# Install Slack
brew cask install slack

# Install Docker
brew cask install docker

# Install 1Password
brew cask install 1password

# Install irccloud
brew cask install irccloud

# Install Plex Media Player
brew cask install plex-media-player

# Install Transmit
brew cask install transmit

# Link git config
ln -sf .rika/gitconfig ../.gitconfig

# Link .zshrc
ln -sf .rika/zshrc ../.zshrc

# Link .zshenv
ln -sf .rika/zshenv ../.zshenv

# Link .taskrc
ln -sf .rika/taskrc ../.taskrc

# Link gpg-agent.conf
mkdir -p ~/.gnupg
ln -sf .rika/gpg-agent.conf ../.gnupg/gpg-agent.conf

touch ~/.hushlogin

# Change current shell to zsh
shell_path="$(brew --prefix)/bin/zsh"
if ! grep "$shell_path" /etc/shells > /dev/null 2>&1 ; then
 sudo bash -c "echo $shell_path >> /etc/shells"
fi
[ $SHELL != $shell_path ] && chsh -s "$shell_path"
